!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=wp.i18n.__,p=wp.components,m=p.ButtonGroup,d=p.Button,f=wp.element,y=f.Component,b=f.Fragment,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(s,e);var t,n,r,c=l(s);function s(){var e;return i(this,s),(e=c.apply(this,arguments)).state={notice:!0},e}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this,t=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"chunkFileUpload",container:document.getElementById("articulate_uploader"),url:articulateOptions.ajax_url,chunk_size:articulateOptions.plupload.chunk_size,max_retries:articulateOptions.plupload.max_retries,dragdrop:!0,multi_selection:!1,file_data_name:"async-upload",multipart_params:{_ajax_nonce:articulateOptions._nonce_upload_file,action:"articulate_upload_file"},filters:{max_file_size:"0",mime_types:[{title:"Zip files",extensions:"zip"},{title:"MP4 files",extensions:"mp4"}]},init:{PostInit:function(){document.getElementById("chunkFileUploadButton").onclick=function(){t.start()}},UploadProgress:function(e,t){100===e.total.percent?document.getElementById("fileArea").innerHTML="".concat(t.name," uploaded. Unzipping content."):document.getElementById("fileArea").innerHTML="".concat(t.name," is uploading at ").concat(e.total.percent,"%")},FileUploaded:function(t,n,r){var i=jQuery.parseJSON(r.response);document.getElementById("fileArea").innerHTML=i.info,1===i.OK&&(e.props.insertData(i),e.setState({notice:!1}),setTimeout((function(){var e=document.getElementById("trial-notice");null!==e&&e.classList.add("hide-notice")}),500))},FilesAdded:function(e,n){1<t.files.length&&t.removeFile(t.files[0]),document.getElementById("fileArea").innerHTML="".concat(t.files[0].name," (").concat((t.files[0].size/1024/1024).toFixed(1)," mb)")},Error:function(e,t){console.log(t)}}});t.init()}},{key:"render",value:function(){return wp.element.createElement(b,null,wp.element.createElement(m,{id:"articulate_uploader"},wp.element.createElement(d,{className:"material-btn grey",id:"chunkFileUpload"},u("Choose your zip file")),wp.element.createElement(d,{id:"chunkFileUploadButton",className:"material-btn",isBusy:!!this.isUploading},wp.element.createElement("i",{class:"upload-icon"},"call_made"),u("Upload!"))),wp.element.createElement("p",{class:"fileArea",id:"fileArea"}))}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(y);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){O(o,r,i,a,l,"next",e)}function l(e){O(o,r,i,a,l,"throw",e)}a(void 0)}))}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var i=C(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=wp.i18n.__,F=wp,D=F.apiFetch,R=(F.apiRequest,wp.components),T=R.Button,A=R.ButtonGroup,U=R.Dashicon,N=R.Modal,B=R.PanelBody,q=R.Placeholder,I=R.RadioControl,M=(R.SelectControl,R.Spinner),H=R.TextControl,G=wp.element,Q=G.Component,J=G.Fragment,K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(s,e);var t,n,r,i,o,a,l,c=j(s);function s(){var e;return k(this,s),(e=c.apply(this,arguments)).getCount=e.getCount.bind(P(e)),e.getLibrary=e.getLibrary.bind(P(e)),e.deleteLibrary=e.deleteLibrary.bind(P(e)),e.insertData=e.insertData.bind(P(e)),e.insertUpload=e.insertUpload.bind(P(e)),e.changeIcon=e.changeIcon.bind(P(e)),e.state={options:{type:"iframe",iFrameOption:"default",ratio:"4:3",lightboxTitleType:"default",linkType:"default"},isUploadOpen:!1,isLibraryOpen:!1,data:[],tempData:null,isLoaded:!1,dir:articulateOptions.dir,count:articulateOptions.count},e}return t=s,(n=[{key:"makeFormData",value:function(e){var t=new FormData;for(var n in e)t.append(n,e[n]);return t}},{key:"getCount",value:(l=E(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D({url:articulateOptions.ajax_url+"?action=articulate_get_dir_data",method:"get"});case 2:t=e.sent,n=t.dir_list,this.setState({dir:n.length});case 5:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getLibrary",value:(a=E(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D({url:articulateOptions.ajax_url+"?action=articulate_get_dir_data",method:"get"});case 2:t=e.sent,n=t.dir_list,this.setState({data:n,isLoaded:!0});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"deleteLibrary",value:(o=E(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoaded:!1}),n=this.makeFormData({action:"del_dir",_ajax_nonce:articulateOptions._nonce_del_dir,dir:t,return_dir_list:1}),e.next=4,D({url:articulateOptions.ajax_url,method:"post",body:n});case 4:if("fail"!=(r=e.sent).status){e.next=7;break}return e.abrupt("return");case 7:i=r.dir_list,void 0!==this.props.attributes.src&&this.props.attributes.src.includes(t)&&this.props.setAttributes({src:"",href:""}),this.setState({dir:i.length}),this.setState({data:i,isLoaded:!0});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"insertData",value:function(e){this.setState({tempData:e}),this.getCount()}},{key:"insertUpload",value:(i=E(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.tempData,r=t.options,i=this.makeFormData({action:"rename_dir",_ajax_nonce:articulateOptions._nonce_rename_dir,dir_name:n.folder,title:void 0!==n.newFolder?n.newFolder:""}),e.next=4,D({url:articulateOptions.ajax_url,method:"post",body:i});case 4:void 0!==(o=e.sent)&&("success"==o[0]&&(n.newFolder=o[1]),a=n.path.replace(n.folder,n.newFolder||n.folder),r.src=a,r.href=a,l=_({},r),this.props.setAttributes(_({},l)),this.setState({isUploadOpen:!1,tempData:null}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"changeIcon",value:function(){setTimeout((function(){var e=document.querySelectorAll(".modal-collect .components-panel__body");Object.keys(e).forEach((function(t){e[t].classList.contains("is-opened")?(e[t].nextElementSibling.classList.remove("dashicons-visibility"),e[t].nextElementSibling.classList.add("dashicons-external")):(e[t].nextElementSibling.classList.remove("dashicons-external"),e[t].nextElementSibling.classList.add("dashicons-visibility"))}))}),200)}},{key:"initMaterializeSelect",value:function(){setTimeout((function(){for(var e=document.querySelectorAll(".elearning-block-scope .input-field select:not(.materialize__done)"),t=0;t<e.length;t++)e[t].classList.add("materialize__done")}),500),setTimeout((function(){for(var e=document.querySelectorAll(".elearning-block-scope .input-field select:not(.materialize__done)"),t=0;t<e.length;t++)e[t].classList.add("materialize__done")}),1e3),setTimeout((function(){for(var e=document.querySelectorAll(".elearning-block-scope .input-field select:not(.materialize__done)"),t=0;t<e.length;t++)e[t].classList.add("materialize__done")}),1500),setTimeout((function(){for(var e=document.querySelectorAll(".elearning-block-scope .input-field select:not(.materialize__done)"),t=0;t<e.length;t++)e[t].classList.add("materialize__done")}),2e3),setTimeout((function(){for(var e=document.querySelectorAll('.quiz-insert-as-options-box input[value="lightbox"]:not(.materialize__done), .quiz-insert-as-options-box input[value="open_link_in_new_window"]:not(.materialize__done), .quiz-insert-as-options-box input[value="open_link_in_same_window"]:not(.materialize__done)'),t=0;t<e.length;t++)e[t].setAttribute("disabled","disabled"),e[t].classList.add("materialize__done");for(var n=document.querySelectorAll(".quiz-size-options-box ul.select-dropdown li span:not(.materialize__done)"),r=0;r<n.length;r++)"Default"!=n[r].innerHTML&&n[r].parentElement.classList.add("disabled"),n[r].classList.add("materialize__done")}),500)}},{key:"render",value:function(){var e=this,t=this.state,n=t.options,r=t.isUploadOpen,i=t.isLibraryOpen,o=t.data,a=t.tempData,l=t.isLoaded;return wp.element.createElement(J,null,wp.element.createElement("div",{className:"elearning-block-scope"},wp.element.createElement(q,{icon:"welcome-learn-more",label:z("e-Learning")},this.props.attributes.src?wp.element.createElement(J,null,this.props.attributes.src,wp.element.createElement(A,null,wp.element.createElement(T,{className:"material-btn grey",onClick:function(){return e.props.setAttributes({src:"",href:""})}},z("Remove")),wp.element.createElement(T,{className:"material-btn",onClick:function(){e.getLibrary(),e.setState({isLibraryOpen:!0})}},z("Choose Another")))):wp.element.createElement(J,null,wp.element.createElement("span",null,z("Upload a .zip or .mp4 file that you published from your tool or choose an existing content item.")),wp.element.createElement(A,null,wp.element.createElement(T,{className:"material-btn grey",onClick:function(){return e.setState({isUploadOpen:!0})}},z("Upload")),wp.element.createElement(T,{className:"material-btn",onClick:function(){e.getLibrary(),e.setState({isLibraryOpen:!0})}},z("Content Library"))))),r&&wp.element.createElement(N,{title:z(""),className:"elearning-modal elearning-block-scope",onRequestClose:function(){return e.setState({isUploadOpen:!1})},shouldCloseOnClickOutside:!1},this.initMaterializeSelect(),wp.element.createElement("h2",{class:"header-upload-file"},z("Upload File")),wp.element.createElement(h,{insertData:this.insertData,options:this.state}),null!==a&&wp.element.createElement("div",{className:"collectionUpload"},wp.element.createElement(H,{label:z("Title:"),className:"top-margin small-title",type:"text",value:void 0!==a.newFolder?a.newFolder:a.folder,onChange:function(t){a.newFolder=t,e.setState({tempData:a})}}),wp.element.createElement(I,{label:z("Insert As:"),className:"top-margin large-title quiz-insert-as-options-box",selected:"iframe_responsive"!=n.type&&n.type?n.type:"iframe",options:[{label:"iFrame",value:"iframe"},{label:"Lightbox (Paid Feature)",value:"lightbox"},{label:"Link that opens in a new window (Paid Feature)",value:"open_link_in_new_window"},{label:"Link that opens in a same window (Paid Feature)",value:"open_link_in_same_window"}],onChange:function(t){n.type=t,e.setState({options:n})}}),wp.element.createElement(A,null,wp.element.createElement(T,{className:"material-btn top-margin",onClick:this.insertUpload},z("Insert"))),wp.element.createElement("p",null,wp.element.createElement("iframe",{src:"https://www.elearningfreak.com/wordpresspluginlatesttrial500.html?v=43000000017&editor=gutenburg",width:"600px",frameborder:"0"}))),wp.element.createElement("iframe",{width:"600",height:"338",src:"https://www.youtube.com/embed/exojBaymRkw",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})),i&&wp.element.createElement(N,{title:z(""),className:"elearning-modal elearning-block-scope",onRequestClose:function(){return e.setState({isLibraryOpen:!1})},shouldCloseOnClickOutside:!1},this.initMaterializeSelect(),!0!==l?wp.element.createElement(q,null,wp.element.createElement(M,null)):null!==o?wp.element.createElement("div",{className:"collection"},wp.element.createElement("div",{class:"collection-header"},wp.element.createElement("h4",null,z("Content Library"))),Object.keys(o).map((function(t){return wp.element.createElement("div",{className:"modal-collect",onClick:function(){e.changeIcon(),e.initMaterializeSelect()}},wp.element.createElement(B,{title:o[t].dir,initialOpen:!1,key:t},wp.element.createElement(I,{label:z("Insert As"),className:"top-margin large-title quiz-insert-as-options-box",selected:"iframe_responsive"!=n.type&&n.type?n.type:"iframe",options:[{label:"iFrame",value:"iframe"},{label:"Lightbox (Paid Feature)",value:"lightbox"},{label:"Link that opens in a new window (Paid Feature)",value:"open_link_in_new_window"},{label:"Link that opens in a same window (Paid Feature)",value:"open_link_in_same_window"}],onChange:function(t){n.type=t,e.setState({options:n})}}),wp.element.createElement(A,null,wp.element.createElement(T,{className:"material-btn top-margin",onClick:function(){n.src="".concat(o[t].path+o[t].dir,"/").concat(o[t].file),n.href="".concat(o[t].path+o[t].dir,"/").concat(o[t].file);var r=_({},n);e.props.setAttributes(_({},r)),e.setState({isLibraryOpen:!1})}},z("Insert")),wp.element.createElement(T,{icon:"trash",label:z("Delete"),className:"top-margin delete-icon-button",onClick:function(){confirm(z("Are you sure you want to do this?"))&&e.deleteLibrary(o[t].dir)}})),wp.element.createElement("p",null,wp.element.createElement("iframe",{src:"https://www.elearningfreak.com/wordpresspluginlatesttrial500.html?v=43000000017",width:"600px",frameborder:"0"}))),wp.element.createElement(U,{className:"floating-eye",icon:"visibility"}),wp.element.createElement(T,{icon:"trash",label:z("Delete"),className:"top-margin delete-icon-button float",onClick:function(){confirm(z("Are you sure you want to do this?"))&&e.deleteLibrary(o[t].dir)}}))}))):wp.element.createElement(J,null,wp.element.createElement("p",null,z("Empty.  Please upload content.")),wp.element.createElement(T,{className:"material-btn grey no-margin",onClick:function(){e.setState({isUploadOpen:!0,isLibraryOpen:!0})}},z("Upload"))))))}}])&&x(t.prototype,n),r&&x(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(Q),Z=wp.i18n.__,V=wp.blocks.registerBlockType;t.default=V("e-learning/block",{title:Z("e-Learning"),description:Z("Quickly embed or insert e-learning content into a post or page. Supports Articulate, Captivate, iSpring, and more."),category:"common",icon:"welcome-learn-more",keywords:[Z("e-learning"),Z("learn"),Z("course")],attributes:{src:{type:"string"},href:{type:"string"},type:{type:"string",default:"iframe"},width:{type:"string",default:"100%"},height:{type:"string",default:"600"},ratio:{type:"string",default:"4:3"},frameborder:{type:"number",default:0},scrolling:{type:"string",default:"no"},title:{type:"string"},link_text:{type:"string"},button:{type:"string"},scrollbar:{type:"string"},colorbox_theme:{type:"string"},size_opt:{type:"string"}},edit:K,save:function(){return null}})}]);